;; -*- mode: clojure; -*-
;; vim: filetype=clojure

;; plugins includes
(include "/var/vcap/jobs/riemann/include/expire.clj")
(include "/var/vcap/jobs/riemann/include/interface.clj")
(include "/var/vcap/jobs/riemann/include/logging.clj")
(include "/var/vcap/jobs/riemann/include/pagerduty.clj")
(include "/var/vcap/jobs/riemann/include/disk.clj")
(include "/var/vcap/jobs/riemann/include/swap.clj")
(include "/var/vcap/jobs/riemann/include/influxdb.clj")

(let [index (index)]
  (streams
   (default :ttl 60
     index
     (disk-alerts pd)     
     (swap-alerts pd)
     (influx {:tags {"env" "<%= p("riemann.influxdb.database") %>"}})
)))
